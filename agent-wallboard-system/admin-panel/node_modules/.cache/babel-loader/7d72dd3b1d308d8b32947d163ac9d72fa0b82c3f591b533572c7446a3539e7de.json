{"ast":null,"code":"var _s = $RefreshSig$();\n// pages/UserManagementPage.js\nimport React, { useState, useEffect } from 'react';\nimport UserTable from '../components/UserTable';\nimport UserFormModal from '../components/UserFormModal';\nimport { userAPI } from '../services/userAPI';\nimport { authAPI } from '../services/authAPI';\nimport '../styles/UserManagementPage.css';\nconst UserManagementPage = ({\n  onLogout\n}) => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const currentUser = authAPI.getCurrentUser();\n\n  // Load users on component mount\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  // 🆕 Auto-clear success message after 3 seconds\n  useEffect(() => {\n    if (successMessage) {\n      const timer = setTimeout(() => {\n        setSuccessMessage('');\n      }, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [successMessage]);\n  const loadUsers = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await userAPI.getAllUsers();\n      setUsers(data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCreateUser = () => {\n    setSelectedUser(null);\n    setIsModalOpen(true);\n  };\n  const handleEditUser = user => {\n    setSelectedUser(user);\n    setIsModalOpen(true);\n  };\n\n  /**\n   * TODO: นักศึกษาเขียน handleDeleteUser function (10%)\n   * \n   * 📝 INSTRUCTIONS:\n   * 1. แสดง confirmation dialog\n   *    - ใช้ window.confirm(`Are you sure you want to delete user \"${user.username}\"?`)\n   * 2. ถ้า user confirm (true):\n   *    - try { ... } catch { ... }\n   *    - เรียก await userAPI.deleteUser(userId)\n   *    - setSuccessMessage('User deleted successfully')\n   *    - await loadUsers() เพื่อ refresh list\n   * 3. ถ้า error:\n   *    - setError(err.message)\n   */\n  const handleDeleteUser = async userId => {\n    const user = users.find(u => u.id === userId);\n    if (!user) return;\n    const confirmed = window.confirm(`Are you sure you want to delete user \"${user.username}\"?`);\n    if (!confirmed) return;\n    try {\n      await userAPI.deleteUser(userId);\n      setSuccessMessage('User deleted successfully');\n      await loadUsers();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  const handleSaveUser = async userData => {\n    try {\n      if (selectedUser) {\n        // Edit mode\n        await userAPI.updateUser(selectedUser.id, userData);\n        setSuccessMessage('User updated successfully');\n      } else {\n        // Create mode\n        await userAPI.createUser(userData);\n        setSuccessMessage('User created successfully');\n      }\n      setIsModalOpen(false);\n      await loadUsers();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  return /*#__PURE__*/React.createElement('div', {\n    className: 'user-management-page'\n  },\n  /*#__PURE__*/\n  // Header\n  React.createElement('div', {\n    className: 'page-header'\n  }, /*#__PURE__*/React.createElement('div', null, /*#__PURE__*/React.createElement('h1', null, '👥 User Management'), /*#__PURE__*/React.createElement('p', {\n    className: 'page-subtitle'\n  }, `Logged in as: ${currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName} (${currentUser === null || currentUser === void 0 ? void 0 : currentUser.username})`)), /*#__PURE__*/React.createElement('div', {\n    className: 'header-actions'\n  }, /*#__PURE__*/React.createElement('button', {\n    className: 'btn btn-primary',\n    onClick: handleCreateUser\n  }, '+ Add New User'), /*#__PURE__*/React.createElement('button', {\n    className: 'btn btn-secondary',\n    onClick: onLogout\n  }, '🚪 Logout'))),\n  // Success message\n  successMessage && /*#__PURE__*/React.createElement('div', {\n    className: 'alert alert-success'\n  }, successMessage),\n  // Error message\n  error && /*#__PURE__*/React.createElement('div', {\n    className: 'alert alert-error'\n  }, error),\n  // Loading state\n  loading ? /*#__PURE__*/React.createElement('div', {\n    className: 'loading'\n  }, '⏳ Loading users...') :\n  /*#__PURE__*/\n  // User table\n  React.createElement(UserTable, {\n    users: users,\n    onEdit: handleEditUser,\n    onDelete: handleDeleteUser\n  }),\n  // User form modal\n  isModalOpen && /*#__PURE__*/React.createElement(UserFormModal, {\n    user: selectedUser,\n    onClose: () => setIsModalOpen(false),\n    onSave: handleSaveUser\n  }));\n};\n_s(UserManagementPage, \"Su+ZMPDNriUXbncE7bkQXIZiaBY=\");\n_c = UserManagementPage;\nexport default UserManagementPage;\nvar _c;\n$RefreshReg$(_c, \"UserManagementPage\");","map":{"version":3,"names":["React","useState","useEffect","UserTable","UserFormModal","userAPI","authAPI","UserManagementPage","onLogout","_s","users","setUsers","loading","setLoading","error","setError","selectedUser","setSelectedUser","isModalOpen","setIsModalOpen","successMessage","setSuccessMessage","currentUser","getCurrentUser","loadUsers","timer","setTimeout","clearTimeout","data","getAllUsers","err","message","handleCreateUser","handleEditUser","user","handleDeleteUser","userId","find","u","id","confirmed","window","confirm","username","deleteUser","handleSaveUser","userData","updateUser","createUser","createElement","className","fullName","onClick","onEdit","onDelete","onClose","onSave","_c","$RefreshReg$"],"sources":["/home/panuwat/class/engse203/engse203-backend-teams/agent-wallboard-system/admin-panel/src/pages/UserManagementPage.js"],"sourcesContent":["// pages/UserManagementPage.js\nimport React, { useState, useEffect } from 'react';\nimport UserTable from '../components/UserTable';\nimport UserFormModal from '../components/UserFormModal';\nimport { userAPI } from '../services/userAPI';\nimport { authAPI } from '../services/authAPI';\nimport '../styles/UserManagementPage.css';\n\nconst UserManagementPage = ({ onLogout }) => {\n    const [users, setUsers] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [selectedUser, setSelectedUser] = useState(null);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [successMessage, setSuccessMessage] = useState('');\n\n    const currentUser = authAPI.getCurrentUser();\n\n    // Load users on component mount\n    useEffect(() => {\n        loadUsers();\n    }, []);\n\n    // 🆕 Auto-clear success message after 3 seconds\n    useEffect(() => {\n        if (successMessage) {\n            const timer = setTimeout(() => {\n                setSuccessMessage('');\n            }, 3000);\n\n            return () => clearTimeout(timer);\n        }\n    }, [successMessage]);\n\n    const loadUsers = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const data = await userAPI.getAllUsers();\n            setUsers(data);\n        } catch (err) {\n            setError(err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleCreateUser = () => {\n        setSelectedUser(null);\n        setIsModalOpen(true);\n    };\n\n    const handleEditUser = (user) => {\n        setSelectedUser(user);\n        setIsModalOpen(true);\n    };\n\n    /**\n     * TODO: นักศึกษาเขียน handleDeleteUser function (10%)\n     * \n     * 📝 INSTRUCTIONS:\n     * 1. แสดง confirmation dialog\n     *    - ใช้ window.confirm(`Are you sure you want to delete user \"${user.username}\"?`)\n     * 2. ถ้า user confirm (true):\n     *    - try { ... } catch { ... }\n     *    - เรียก await userAPI.deleteUser(userId)\n     *    - setSuccessMessage('User deleted successfully')\n     *    - await loadUsers() เพื่อ refresh list\n     * 3. ถ้า error:\n     *    - setError(err.message)\n     */\n    const handleDeleteUser = async (userId) => {\n        const user = users.find(u => u.id === userId);\n        if (!user) return;\n\n        const confirmed = window.confirm(`Are you sure you want to delete user \"${user.username}\"?`);\n        if (!confirmed) return;\n\n        try {\n            await userAPI.deleteUser(userId);\n            setSuccessMessage('User deleted successfully');\n            await loadUsers();\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n\n    const handleSaveUser = async (userData) => {\n        try {\n            if (selectedUser) {\n                // Edit mode\n                await userAPI.updateUser(selectedUser.id, userData);\n                setSuccessMessage('User updated successfully');\n            } else {\n                // Create mode\n                await userAPI.createUser(userData);\n                setSuccessMessage('User created successfully');\n            }\n\n            setIsModalOpen(false);\n            await loadUsers();\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n\n    return React.createElement('div', { className: 'user-management-page' },\n        // Header\n        React.createElement('div', { className: 'page-header' },\n            React.createElement('div', null,\n                React.createElement('h1', null, '👥 User Management'),\n                React.createElement('p', { className: 'page-subtitle' },\n                    `Logged in as: ${currentUser?.fullName} (${currentUser?.username})`\n                )\n            ),\n            React.createElement('div', { className: 'header-actions' },\n                React.createElement('button', {\n                    className: 'btn btn-primary',\n                    onClick: handleCreateUser\n                }, '+ Add New User'),\n                React.createElement('button', {\n                    className: 'btn btn-secondary',\n                    onClick: onLogout\n                }, '🚪 Logout')\n            )\n        ),\n\n        // Success message\n        successMessage && React.createElement('div', { className: 'alert alert-success' },\n            successMessage\n        ),\n\n        // Error message\n        error && React.createElement('div', { className: 'alert alert-error' }, error),\n\n        // Loading state\n        loading ?\n            React.createElement('div', { className: 'loading' }, '⏳ Loading users...') :\n            // User table\n            React.createElement(UserTable, {\n                users: users,\n                onEdit: handleEditUser,\n                onDelete: handleDeleteUser\n            }),\n\n        // User form modal\n        isModalOpen && React.createElement(UserFormModal, {\n            user: selectedUser,\n            onClose: () => setIsModalOpen(false),\n            onSave: handleSaveUser\n        })\n    );\n};\n\nexport default UserManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}